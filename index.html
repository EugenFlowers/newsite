<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Встроенный браузер (same-origin)</title>
</head>
<body>
    <iframe id="browser-frame"
            src="https://netangels.ru/?p_ref=u120620"
            style="width:100%;height:100vh;border:none;"
            sandbox="allow-scripts allow-same-origin allow-forms">
    </iframe>

    <script>
        const iframe = document.getElementById('browser-frame');

        function injectHandler() {
            try {
                const w = iframe.contentWindow;
                if (!w) return;

                // Перехватываем window.open внутри iframe
                w.open = function (url) {
                    if (url) {
                        iframe.src = url;   // открываем «новое окно» в том же iframe
                    }
                    return null;           // не создаём реальное окно
                };
            } catch (e) {
                // cross-origin: доступа нет, перехват невозможен
            }
        }

        iframe.addEventListener('load', injectHandler);
    </script>
</body>
</html>









